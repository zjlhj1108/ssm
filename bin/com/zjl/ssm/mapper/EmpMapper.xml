<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zjl.ssm.mapper.EmpMapper">
	<sql id="selectAllEmp">
	SELECT eid, eName, password, telephone,gender,did from emp
	</sql>
	<!-- 设置映射关系 -->
	<resultMap type="emp" id="empAndDeptSelectByStep">
		<id column="eid" property="eid"/>
		<result column="eName" property="eName"/>
		<result column="password" property="password"/>
		<result column="telethone" property="telethone"/>
		<result column="gender" property="gender"/>
		<association property="dept"  select="com.zjl.ssm.mapper.DeptMapper.getDeptById" javaType="dept" column="did">
		<id column="did" property="did"/>
		<result column="dName" property="dName"/>
		</association>
	
	</resultMap>
	
	<select id="getAllEmp" resultMap="empAndDeptSelectByStep">
		<include refid="selectAllEmp"></include>
	</select>
	<!-- 添加员工 -->
	<insert id="insertEmp">
		insert into emp values(#{eid},#{eName},#{password},#{telephone},#{dept.did})
	</insert>
	
	<!-- 批量删除员工 -->
	<delete id="deleteChecked">
		delete from emp where eid in(${values})
	</delete>
		<!-- 删除员工 -->
	<delete id="deleteOne">
		delete from emp where eid =#{eid}
	</delete>
	
		<!-- 添加员工 -->
	<select id="getEmpById" resultMap="empAndDeptSelectByStep">
		SELECT eid, eName, password, telephone,gender,did from emp where eid=#{eid}
	</select>
	
		<!-- 更新员工 -->
	<update id="updateEmp">
		 update emp set eName=#{eName},password=#{password},telephone=#{telephone},gender=#{gender},did=#{dept.did} where eid=#{eid}
	</update>
</mapper>